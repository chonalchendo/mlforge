# v0.5.0 - Compute Backends, Versioning & Online Store

**Target Release:** Q1 2025
**Status:** In Progress
**Breaking Changes:** Yes

## Overview

v0.5.0 introduces three major capabilities:

1. **Feature Versioning** - Automated semantic versioning with content-hash tracking
2. **DuckDB Compute Backend** - Alternative to Polars for large dataset computation
3. **Redis Online Store** - Real-time feature serving via Redis

This release establishes mlforge as a complete feature store with both offline (batch) and online (real-time) capabilities.

## Features Summary

| Feature | Status | Effort | Breaking | Spec |
|---------|--------|--------|----------|------|
| [Versioning](v0.5.0/versioning.md) | Done | Medium | Yes | [Link](v0.5.0/versioning.md) |
| [DuckDB Engine](v0.5.0/duckdb-engine.md) | Done | Medium-High | No | [Link](v0.5.0/duckdb-engine.md) |
| [Unified Types](v0.5.0/unified-types.md) | Done | Medium | No | [Link](v0.5.0/unified-types.md) |
| [Redis Online Store](v0.5.0/redis-online.md) | Planned | Medium | No | [Link](v0.5.0/redis-online.md) |

## Implementation Progress

| Phase | Description | Status |
|-------|-------------|--------|
| 1-5 | Feature Versioning | Done |
| 6-9 | DuckDB Compute Backend | Done |
| 9.1-9.4 | Unified Type System | Done |
| 10-12 | Redis Online Store | Planned |
| 13 | Dependencies | Planned |
| 14 | Tests | Done |
| 15 | Documentation | Planned |
| 16 | Examples | Planned |

## Version Definition of Done

All items must be complete before v0.5.0 can be released:

### Features
- [x] Feature Versioning complete
- [x] DuckDB Compute Backend complete
- [x] Unified Type System complete
- [ ] Redis Online Store complete

### Quality
- [x] All tests passing (379 tests)
- [x] Coverage >= 80% (currently 81%)
- [x] No ruff/ty errors
- [x] Code review completed

### Documentation
- [ ] API docs updated for all features
- [ ] User guide updated
- [ ] CLI docs updated
- [ ] Migration guide complete
- [ ] CHANGELOG updated

### Verification
- [x] Works in `examples/transactions`
- [ ] All features verified end-to-end
- [ ] Breaking changes documented

## Breaking Changes

### Storage Layout

Feature storage now includes version directories:

```
# Before (v0.4.0)
feature_store/user_spend.parquet

# After (v0.5.0)
feature_store/user_spend/1.0.0/data.parquet
```

### Metadata Schema

- `last_updated` renamed to `updated_at`
- New required fields: `version`, `created_at`, `content_hash`, `schema_hash`, `config_hash`
- New optional field: `change_summary`

### get_training_data() Signature

Features parameter now accepts version tuples:

```python
get_training_data(
    spine,
    features=[
        "user_spend",                    # latest
        ("merchant_features", "1.0.0"),  # specific version
    ],
    store=store,
)
```

## Dependencies

New optional dependencies:

```toml
[project.optional-dependencies]
duckdb = ["duckdb>=1.0.0"]
redis = ["redis>=5.0.0"]
all = ["duckdb>=1.0.0", "redis>=5.0.0"]
```

## Migration Guide

See individual feature specs for detailed migration steps:

1. **Rebuild features with versions:**
   ```bash
   mlforge build --features user_spend
   ```

2. **Regenerate manifest:**
   ```bash
   mlforge manifest --regenerate
   ```

3. **Install optional dependencies:**
   ```bash
   pip install mlforge[duckdb,redis]
   ```

## Future Considerations

Features deferred to future releases:

- **v0.5.x**: Feature function code hashing
- **v0.6.0**: Spark compute backend, GCS storage
- **v0.6.0+**: `mlforge serve` REST API
- **v0.7.0**: Airflow/Dagster operators
- **v0.8.0**: DynamoDB online store
